!function(){function a(a){this.controller=a.controller,this.definition=a.definition,this.tick=0,this._respawn()}function b(a){this.controller=a.controller,this.definition=a.definition}function c(c){c=c||{},this.phase=0,this.run=!1,this.cache={},null==c.container&&(console.warn("SiriWaveJS: no container defined, using body"),c.container=document.body),this.style=c.style||"ios",this.container=c.container,this.width=c.width||window.getComputedStyle(this.container).width.replace("px",""),this.height=c.height||window.getComputedStyle(this.container).height.replace("px",""),this.ratio=c.ratio||window.devicePixelRatio||1,this.cache.width=this.ratio*this.width,this.cache.height=this.ratio*this.height,this.cache.height2=this.cache.height/2,this.cache.width2=this.cache.width/2,this.cache.width4=this.cache.width/4,this.cache.heightMax=this.cache.height2-4,this.amplitude=void 0==c.amplitude?1:c.amplitude,this.speed=void 0==c.speed?.2:c.speed,this.frequency=void 0==c.frequency?6:c.frequency,this.color=this._hex2rgb(c.color||"#fff"),this.speedInterpolationSpeed=c.speedInterpolationSpeed||.005,this.amplitudeInterpolationSpeed=c.amplitudeInterpolationSpeed||.05,this.cache.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.cache.width,this.canvas.height=this.cache.height,c.cover?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=this.cache.width/this.ratio+"px",this.canvas.style.height=this.cache.height/this.ratio+"px"),this.curves=[];var d=0,e=0;if("ios9"===this.style)for(;d<a.prototype.definition.length;d++)for(e=0;e<3*Math.random()|0;e++)this.curves.push(new a({controller:this,definition:a.prototype.definition[d]}));else for(;d<b.prototype.definition.length;d++)this.curves.push(new b({controller:this,definition:b.prototype.definition[d]}));this.container.appendChild(this.canvas),c.autostart&&this.start()}a.prototype._respawn=function(){this.amplitude=.3+.7*Math.random(),this.seed=Math.random(),this.openClass=2+3*Math.random()|0},a.prototype._ypos=function(a){var b=this.tick,c=-1*Math.abs(Math.sin(b))*this.controller.amplitude*this.amplitude*this.controller.cache.heightMax*Math.pow(1/(1+Math.pow(this.openClass*a,2)),2);return Math.abs(c)<.001&&this._respawn(),c},a.prototype._draw=function(a){var b=this.controller.ctx;this.tick+=this.controller.speed*(1-.5*Math.sin(this.seed*Math.PI)),b.beginPath();for(var c,d,e=this.controller.cache.width2+(-this.controller.cache.width4+this.seed*this.controller.cache.width2),f=this.controller.cache.height2,g=null,h=-3;h<=3;h+=.01)c=e+h*this.controller.cache.width4,d=f+(a||1)*this._ypos(h),g=g||c,b.lineTo(c,d);var i=Math.abs(this._ypos(0)),j=b.createRadialGradient(e,f,1.15*i,e,f,.3*i);j.addColorStop(0,"rgba("+this.definition.color+", 0.4)"),j.addColorStop(1,"rgba("+this.definition.color+", 0.2)"),b.fillStyle=j,b.lineTo(g,f),b.closePath(),b.fill()},a.prototype.draw=function(){this._draw(-1),this._draw(1)},a.prototype.definition=[{color:"32,133,252"},{color:"94,252,169"},{color:"253,71,103"}],b.prototype._globAttenuationEquation=function(a){return null==b.prototype._globAttenuationEquation.cache[a]&&(b.prototype._globAttenuationEquation.cache[a]=Math.pow(4/(4+Math.pow(a,4)),4)),b.prototype._globAttenuationEquation.cache[a]},b.prototype._globAttenuationEquation.cache={},b.prototype._xpos=function(a){return this.controller.cache.width2+a*this.controller.cache.width4},b.prototype._ypos=function(a){var b=this.controller.cache.heightMax*this.controller.amplitude/this.definition.attenuation;return this.controller.cache.height2+this._globAttenuationEquation(a)*b*Math.sin(this.controller.frequency*a-this.controller.phase)},b.prototype.draw=function(){var a=this.controller.ctx;a.moveTo(0,0),a.beginPath(),a.strokeStyle="rgba("+this.controller.color+","+this.definition.opacity+")",a.lineWidth=this.definition.lineWidth;for(var b=-2;b<=2;b+=.01){var c=this._ypos(b);Math.abs(b)>=1.9&&(c=this.controller.cache.height2),a.lineTo(this._xpos(b),c)}a.stroke()},b.prototype.definition=[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}],c.prototype._hex2rgb=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,b,c,d){return b+b+c+c+d+d});var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?parseInt(b[1],16).toString()+","+parseInt(b[2],16).toString()+","+parseInt(b[3],16).toString():null},c.prototype._interpolate=function(a){increment=this[a+"InterpolationSpeed"],Math.abs(this.cache.interpolation[a]-this[a])<=increment?this[a]=this.cache.interpolation[a]:this.cache.interpolation[a]>this[a]?this[a]+=increment:this[a]-=increment},c.prototype._clear=function(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.cache.width,this.cache.height),this.ctx.globalCompositeOperation="source-over"},c.prototype._draw=function(){for(var a=0,b=this.curves.length;a<b;a++)this.curves[a].draw()},c.prototype._startDrawCycle=function(){!1!==this.run&&(this._clear(),this._interpolate("amplitude"),this._interpolate("speed"),this._draw(),this.phase=(this.phase+Math.PI*this.speed)%(2*Math.PI),window.requestAnimationFrame?window.requestAnimationFrame(this._startDrawCycle.bind(this)):setTimeout(this._startDrawCycle.bind(this),20))},c.prototype.start=function(){this.phase=0,this.run=!0,this._startDrawCycle()},c.prototype.stop=function(){this.phase=0,this.run=!1},c.prototype.setSpeed=function(a,b){this.cache.interpolation.speed=a},c.prototype.setAmplitude=function(a){this.cache.interpolation.amplitude=Math.max(Math.min(a,1),0)},"function"==typeof define&&define.amd?define(function(){return c}):window.SiriWave=c}();